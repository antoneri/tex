\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{common}
\RequirePackage[l2tabu,orthodox]{nag} % Validation

\DeclareOption{swedish}{\PassOptionsToPackage{swedish}{babel}}
\DeclareOption{english}{\PassOptionsToPackage{english}{babel}}
\DeclareOption{debug}{\PassOptionsToPackage{showframe}{geometry}}
\ExecuteOptions{swedish}
\ProcessOptions\relax

\RequirePackage{babel}
\RequirePackage[a4paper,head=30pt,bottom=1.2in]{geometry}

\RequirePackage{lmodern} % Latin Modern
\RequirePackage{courier} % Courier
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

\RequirePackage{parskip} % Blank rad istället för indrag
\RequirePackage{hyphenat} % Avstavning
\RequirePackage{microtype} % Bättre kerning

\RequirePackage{graphicx,epstopdf}
\RequirePackage{amsmath,amssymb,amsthm} 
\RequirePackage{commath} % Typsättning av differentialer osv.
\RequirePackage{cancel}
\RequirePackage{siunitx} % SI-enheter
\RequirePackage{listings}

\RequirePackage{framed}
\RequirePackage{fancyhdr}
\RequirePackage[usenames,dvipsnames]{color}
\RequirePackage{pgfplots}
\RequirePackage[hang,margin=3ex,small,bf,labelsep=endash]{caption}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{float}
\RequirePackage{cleveref} 

\pgfplotsset{compat=newest}
\epstopdfsetup{update,suffix=.generated,outdir=./figures/}
\graphicspath{{./figures/}}

\pagestyle{fancy}

\newcommand{\inputcode}[2][C]{\lstinputlisting[language=#1]{#2}}

\let\oldauthor\author
\renewcommand{\author}[1]{\newcommand{\theauthor}{#1}\oldauthor{#1}}

\let\oldtitle\title
\renewcommand{\title}[1]{\newcommand{\thetitle}{#1}\oldtitle{#1}} 

\renewcommand{\footnoterule}{
  \kern -3pt
  \hrule width \textwidth height 0.4pt
  \kern 2.6pt
}

\AtBeginDocument{
	\input{title}
	\lhead{\theauthor}
	\rhead{\thetitle\\\today}
	\cfoot{\thepage}
}

\lstset{
	title=\ttfamily\lstname,
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	showstringspaces=false,
	numbers=left,
	numbersep=10pt,
	keywordstyle=\color{NavyBlue},
	identifierstyle=\color{Black},
	stringstyle=\color{Purple},
	commentstyle=\itshape\color{ForestGreen},
	numberstyle=\scriptsize\color{Gray},
	tabsize=4
}

\endinput
