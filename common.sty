\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{common}
\RequirePackage[l2tabu,orthodox]{nag} % Validation

\DeclareOption{swedish}{\PassOptionsToPackage{swedish}{babel}}
\DeclareOption{english}{\PassOptionsToPackage{english}{babel}}
\ExecuteOptions{swedish}
\ProcessOptions\relax
\RequirePackage{babel}

\RequirePackage{lmodern} % Latin Modern
\RequirePackage{courier} % Courier

\RequirePackage[a4paper]{geometry}
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

\RequirePackage{parskip} % Blank rad istället för indrag
\RequirePackage{hyphenat} % Avstavning
\RequirePackage{microtype} % Bättre kerning

\RequirePackage{graphicx,epstopdf,float}
\RequirePackage{amsmath,amssymb,amsfonts,amsthm} 
\RequirePackage{commath} % Typsättning av differentialer osv.
\RequirePackage{cancel}
\RequirePackage{siunitx} % SI-enheter
\RequirePackage{pgfplots}
\RequirePackage{listings}

\RequirePackage{framed}
\RequirePackage{fancyhdr}
\RequirePackage[usenames,dvipsnames]{color}
\RequirePackage[hang,margin=3ex,small,bf,labelsep=endash]{caption}
\RequirePackage{hyperref}
\RequirePackage{cleveref} 

\pgfplotsset{compat=newest}
\epstopdfsetup{outdir=./figures/}

\pagestyle{fancy}

\newcommand{\inputcode}[2][C]{\lstinputlisting[language=#1]{#2}}

\let\oldauthor\author
\renewcommand{\author}[1]{\newcommand{\theauthor}{#1}\oldauthor{#1}}

\let\oldtitle\title
\renewcommand{\title}[1]{\newcommand{\thetitle}{#1}\oldtitle{#1}} 

\AtBeginDocument{
	\input{title.tex}
	\headheight 30pt
	\lhead{\theauthor}
	\rhead{\thetitle\\\today}
	\cfoot{\thepage}
}

\lstset{
	title=\ttfamily\lstname,
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	showstringspaces=false,
	numbers=left,
	numbersep=10pt,
	keywordstyle=\color{NavyBlue},
	identifierstyle=\color{Black},
	stringstyle=\color{Purple},
	commentstyle=\itshape\color{ForestGreen},
	numberstyle=\scriptsize\color{Gray},
	tabsize=4
}

\endinput
