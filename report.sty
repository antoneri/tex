\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{report}
\RequirePackage[l2tabu,orthodox]{nag}

\DeclareOption{swedish}{\PassOptionsToPackage{swedish}{babel}}
\DeclareOption{english}{\PassOptionsToPackage{english}{babel}}
\DeclareOption{debug}{\PassOptionsToPackage{showframe}{geometry}}
\ExecuteOptions{english}
\ProcessOptions\relax

\RequirePackage{babel}
\RequirePackage[a4paper,head=40pt,bottom=1.2in]{geometry}

\RequirePackage{courier}

\RequirePackage{ifxetex}

\ifxetex
  \RequirePackage{fontspec}
\else
  \RequirePackage[T1]{fontenc}
  \RequirePackage[utf8]{inputenc}
  \RequirePackage{lmodern}
\fi

%\RequirePackage{parskip}
\RequirePackage{hyphenat}
\RequirePackage{microtype}

\RequirePackage{graphicx,epstopdf}
\RequirePackage{amsmath,amssymb,amsthm}
\RequirePackage{commath}
\RequirePackage{cancel}
\RequirePackage{siunitx}
\RequirePackage{listings}
\RequirePackage{booktabs}

\RequirePackage{framed}
\RequirePackage{fancyhdr}
\RequirePackage[usenames,dvipsnames]{xcolor}
\RequirePackage{pgfplots}
\RequirePackage[hang,margin=3ex,small,bf,labelsep=endash]{caption}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{float}
\RequirePackage{cleveref}
\RequirePackage{subcaption}
\RequirePackage{todonotes}
\RequirePackage{lscape}
\RequirePackage{multicol}
\RequirePackage[bottom]{footmisc}

\RequirePackage{titling}
\setlength{\droptitle}{3em}

\pgfplotsset{compat=newest}
\epstopdfsetup{update,suffix=.generated,outdir=./figures/}
\graphicspath{{./figures/}}

\pagestyle{fancy}

\newcommand{\inputcode}[2][Matlab]{\lstinputlisting[language=#1]{#2}}

\let\oldauthor\author
\renewcommand{\author}[1]{\newcommand{\theauthor}{#1}\oldauthor{#1}}

\let\oldtitle\title
\renewcommand{\title}[1]{\newcommand{\thetitle}{#1}\oldtitle{#1}}

\renewcommand{\footnoterule}{
  \kern -3pt
  \hrule width \textwidth height 0.4pt
  \kern 2.6pt
}

\lstset{
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=true,
  breaklines=true,
  showstringspaces=false,
  prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
  numbers=left,
  numbersep=10pt,
  keywordstyle=\color{NavyBlue},
  identifierstyle=\color{Black},
  stringstyle=\color{Purple},
  commentstyle=\itshape\color{ForestGreen},
  numberstyle=\tiny\color{Gray},
  tabsize=4
}

\let\oldhat\hat
\renewcommand{\vec}[1]{\mathbf{#1}}
\renewcommand{\hat}[1]{\oldhat{\mathbf{#1}}}

\endinput
